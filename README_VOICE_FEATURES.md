# 🎤 語音功能說明

## 新增功能

### 1. 增強的語音辨識
- **多語言支援**：支援繁體中文、簡體中文、英文、日文、韓文、西班牙文、法文、德文等
- **實時辨識顯示**：在錄音時即時顯示辨識結果
- **連續辨識模式**：可選擇是否開啟連續語音辨識

### 2. 語音命令
使用語音控制聊天室操作，無需手動點擊：
- 🗣️ **「發送」或「送出」** - 發送訊息
- 🗣️ **「清除」** - 清除輸入框
- 🗣️ **「搶答」** - 開啟搶答功能
- 🗣️ **「投票」** - 開啟投票功能
- 🗣️ **「朗讀」** - 切換朗讀功能

### 3. 文字轉語音 (TTS)
- **自動朗讀訊息**：接收到新訊息時自動朗讀
- **可調整朗讀速度**：0.5x ~ 2.0x
- **可調整音調**：0.5 ~ 2.0
- **多種語音選擇**：根據系統支援選擇不同的語音
- **一鍵開關**：點擊工具列的 🔊 按鈕切換

### 4. 語音設定面板
點擊工具列的 **⚙️ 語音設定** 按鈕，可以調整：
- 語音辨識語言
- 連續辨識模式
- 即時結果顯示
- 語音命令開關
- 朗讀語音選擇
- 朗讀速度和音調
- 設定會自動儲存到瀏覽器

## 使用方式

### 基本語音輸入
1. 按住 **🎤 語音** 按鈕開始錄音
2. 說話時會即時顯示辨識結果
3. 放開按鈕自動停止並將文字填入輸入框
4. 可以編輯文字後再發送

### 使用語音命令
1. 確保在語音設定中開啟「啟用語音命令」
2. 錄音時說出命令詞，如「發送」、「清除」等
3. 系統會自動執行對應操作

### 開啟訊息朗讀
1. 點擊工具列的 **🔊 朗讀** 按鈕
2. 接收到新訊息時會自動朗讀
3. 可以在語音設定中調整朗讀參數

### 自訂語音設定
1. 點擊 **⚙️ 語音設定** 按鈕
2. 調整各項參數：
   - 選擇辨識語言
   - 開啟/關閉連續辨識
   - 選擇朗讀語音
   - 調整速度和音調
3. 點擊 **💾 儲存設定** 保存

### 測試朗讀功能
1. 在語音設定面板中
2. 調整朗讀參數後
3. 點擊 **🔊 測試朗讀** 按鈕聽取效果

## 瀏覽器支援

- ✅ **Chrome/Edge** - 完整支援所有功能
- ✅ **Safari** - 支援語音辨識和朗讀
- ⚠️ **Firefox** - 部分支援（語音辨識可能不可用）

## 隱私說明

- 語音辨識在本地瀏覽器進行，但可能會傳送到瀏覽器提供商的伺服器
- 錄音檔案會傳送到聊天室伺服器
- 所有設定儲存在瀏覽器的 localStorage 中
- 不會額外收集或儲存語音資料

## 疑難排解

### 語音辨識不工作
1. 檢查瀏覽器是否支援 Web Speech API
2. 確認麥克風權限已授予網站
3. 嘗試重新載入頁面

### 朗讀沒有聲音
1. 檢查系統音量設定
2. 確認已開啟朗讀功能（按鈕顯示「開」）
3. 在語音設定中測試朗讀功能

### 語音命令無反應
1. 確認在語音設定中已開啟「啟用語音命令」
2. 清楚說出完整的命令詞
3. 檢查辨識語言是否設定正確

## 技術細節

### 使用的 API
- **Web Speech API** - 語音辨識
- **SpeechRecognition** - 即時語音轉文字
- **SpeechSynthesis** - 文字轉語音
- **MediaRecorder API** - 音訊錄製

### 儲存的設定
所有設定儲存在 `localStorage` 中：
- `voiceLang` - 辨識語言
- `voiceContinuous` - 連續辨識
- `voiceInterim` - 即時結果
- `voiceCommands` - 語音命令
- `ttsEnabled` - 朗讀開關
- `ttsRate` - 朗讀速度
- `ttsPitch` - 朗讀音調
- `ttsVoiceName` - 朗讀語音名稱

## 未來改進計畫

- [ ] 支援更多語音命令
- [ ] 新增語音情緒分析
- [ ] 語音訊息轉寫優化
- [ ] 多人同時語音支援
- [ ] 語音訊息搜尋功能
